<!DOCTYPE html>
<html>
<head>
<title>DAY 16 | Sep 9</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">
<link rel="stylesheet" href="/DBT-Assignment/css/styles.css">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
      <div class="header">
        <div class="line">
            <ul class="ul">
                <li  class="red li"></li>
                <li  class="yellow li"></li>
                <li  class="green li"></li>
            </ul>
        </div>

        <div class="sql">docker exec -it oracle bash -c "source /home/oracle/.bashrc; sqlplus /nolog"
            <br>
            SQL*Plus: Release 12.2.0.1.0
            <br> <br>
            SQL> <span class="span">SELECT</span> * <span class="span"> FROM</span> DBT-ASSIGNMENT <span
                class="span">WHERE</span> Day= <span class="day">' ? '</span>;
                <br>
                <a class="nav-li"  href="/DBT-Assignment/Aug 24/Aug24.html">DAY 2</a>
                <a class="nav-li"  href="/DBT-Assignment/Aug 25/Aug25.html">DAY 3</a>
                <a class="nav-li" href="/DBT-Assignment/Aug 26/Aug26.html">DAY 4</a>
                <a class="nav-li"  href="/DBT-Assignment/Aug 27/Aug27.html">DAY 5</a>
                <a class="nav-li"   href="/DBT-Assignment/Aug 28/Aug28.html">DAY 6</a>
                <a class="nav-li"   href="/DBT-Assignment/Aug 29/Aug29.html">DAY 7</a>
                <a class="nav-li"   href="/DBT-Assignment/Aug 31/Aug31.html">DAY 8</a>
                <a class="nav-li"   href="/DBT-Assignment/Sep 1/Sep1.html">DAY 9</a>
                <a class="nav-li"   href="/DBT-Assignment/Sep 2/Sep2.html">DAY 10</a>
                <a class="nav-li"   href="/DBT-Assignment/Sep 3/Sep3.html">DAY 11</a>
                <a class="nav-li"   href="/DBT-Assignment/Sep 4/Sep4.html">DAY 12</a>
                <a class="nav-li"   href="/DBT-Assignment/Sep 5/Sep5.html">DAY 13</a>
                <a class="nav-li"   href="/DBT-Assignment/Sep 7/Sep7.html">DAY 14</a>
                <a class="nav-li"   href="/DBT-Assignment/Sep 8/Sep8.html">DAY 15</a>
                <a class="nav-li"   href="/DBT-Assignment/Sep 9/Sep9.html">DAY 16</a>

        </div>

       
    </div>
<h1 id="day-16">DAY 16</h1>
<pre class="hljs"><code><div>PRN : <span class="hljs-number">200243020003</span>
</div></code></pre>
<h2 id="triggers">Triggers</h2>
<h4 id="1-the-rows-in-the-jobs-table-store-a-minimum-salary-and-a-maximum-salary-allowed-for-different-jobid-values-you-are-asked-to-write-code-to-ensure-that-employees-salaries-fall-within-the-range-allowed-for-their-job-type-for-insert-and-update-operationswrite-a-procedure-called-checksalary-that-accepts-two-parameters-one-for-an-employees-job-id-string-and-the-other-for-the-salary-the-procedure-uses-the-job-id-to-determine-the-minimum-and-maximum-salary-for-the-speci%EF%BF%BDied-job-if-the-salary-parameter-does-not-fall-within-the-salary-range-of-the-job-inclusive-of-the-minimum-and-maximum-then-it-should-raise-an-application-exception-with-the-message-invalid-salary-sal-salaries-for-job-jobid-must-be-betweenmin-and-max-replace-the-various-items-in-the-message-with-values-supplied-by-parameters-and-variables-populated-by-queries-save-the-%EF%BF%BDile-use-table-jobs-create-a-trigger-called-checksalarytrg-on-the-copyemp-table-that-%EF%BF%BDires-before-an-insert-or-update-operation-on-each-row-the-trigger-must-call-the-checksalary-procedure-to-carry-out-the-business-logic-the-trigger-should-pass-the-new-job-id-and-salary-to-the-procedure-parameters">1. The rows in the JOBS table store a minimum salary and a maximum salary allowed for different JOB_ID values. You are asked to write code to ensure that employees salaries fall within the range allowed for their job type, for insert and update operations.Write a procedure called CHECK_SALARY that accepts two parameters, one for an employee's job ID string and the other for the salary. The procedure uses the job ID to determine the minimum and maximum salary for the speci�ied job. If the salary parameter does not fall within the salary range of the job, inclusive of the minimum and maximum, then it should raise an application exception, with the message Invalid salary <sal>. Salaries for job <jobid> must be between<min> and <max>. Replace the various items in the message with values supplied by parameters and variables populated by queries. Save the �ile. [Use table Jobs] Create a trigger called CHECK_SALARY_TRG on the copy_emp table that �ires before an INSERT or UPDATE operation on each row. The trigger must call the CHECK_SALARY procedure to carry out the business logic. The trigger should pass the new job ID and salary to the procedure parameters.</h4>
<pre class="hljs"><code><div><span class="hljs-keyword">create</span>
	<span class="hljs-keyword">OR</span> <span class="hljs-keyword">REPLACE</span> <span class="hljs-keyword">PROCEDURE</span> check_salary (jid copy_emp.job_id % <span class="hljs-keyword">TYPE</span>, sal <span class="hljs-built_in">number</span>) <span class="hljs-keyword">AS</span> mn
		<span class="hljs-built_in">number</span>;
mx number;
sal_exp
EXCEPTION;
<span class="hljs-keyword">BEGIN</span>
	<span class="hljs-keyword">SELECT</span>
		min_sal,
		max_sal <span class="hljs-keyword">INTO</span>
mn,
mx
<span class="hljs-keyword">FROM</span>
	jobs
<span class="hljs-keyword">WHERE</span>
	job_id = jid;

IF sal NOT BETWEEN mn AND MX THEN
	raise sal_exp;

<span class="hljs-keyword">END</span> <span class="hljs-keyword">IF</span>;

EXCEPTION
WHEN sal_exp THEN
	DBMS_OUTPUT.PUT_LINE ('salary not in valid range');

<span class="hljs-keyword">END</span>;

/ <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR</span> <span class="hljs-keyword">REPLACE</span> <span class="hljs-keyword">TRIGGER</span> check_salary_trg <span class="hljs-keyword">BEFORE</span> <span class="hljs-keyword">INSERT</span>
	<span class="hljs-keyword">OR</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-keyword">ON</span> copy_emp <span class="hljs-keyword">FOR</span> <span class="hljs-keyword">EACH</span> <span class="hljs-keyword">ROW</span>
<span class="hljs-keyword">BEGIN</span>
	check_salary (:new.job_id, :new.salary);
<span class="hljs-keyword">END</span>;

/
<span class="hljs-keyword">BEGIN</span>
	<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> copy_emp
		<span class="hljs-keyword">values</span>(&amp; eid, <span class="hljs-string">'&amp;fname'</span>, <span class="hljs-string">'&amp;lname'</span>, <span class="hljs-string">'&amp;email'</span>, <span class="hljs-string">'&amp;phno'</span>, <span class="hljs-string">'&amp;hdate'</span>, <span class="hljs-string">'&amp;job'</span>, &amp; sal, &amp; comm, &amp; <span class="hljs-keyword">mid</span>, &amp; did);
<span class="hljs-keyword">END</span>;

/
</div></code></pre>
<h4 id="2-you-are-asked-to-prevent-employees-from-being-deleted-during-business-hours-write-a-statement-trigger-called-deleteemptrg-on-the-employeescopy-table-to-prevent-rows-from-being-deleted-during-weekday-business-hours-which-are-from-900-am-to-600-pm-and-day-mon-to-fri%22-now-try-deleting-employee-205-from-employeescopy-table">2. You are asked to prevent employees from being deleted during business hours. Write a statement trigger called DELETE_EMP_TRG on the employees_copy table to prevent rows from being deleted during weekday business hours, which are from 9:00 a.m. to 6:00 p.m. And day MON to FRI&quot;. Now, try deleting employee 205 from employees_copy table.</h4>
<pre class="hljs"><code><div><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR</span> <span class="hljs-keyword">REPLACE</span> <span class="hljs-keyword">TRIGGER</span> delete_emp_trg <span class="hljs-keyword">BEFORE</span> <span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">ON</span> copy_emp
<span class="hljs-keyword">BEGIN</span>
	<span class="hljs-keyword">IF</span> to_char(<span class="hljs-keyword">sysdate</span>, <span class="hljs-string">'DY'</span>)
		<span class="hljs-keyword">NOT</span> <span class="hljs-keyword">IN</span>(<span class="hljs-string">'SAT'</span>, <span class="hljs-string">'SUN'</span>) <span class="hljs-keyword">AND</span> to_number(to_char(<span class="hljs-keyword">sysdate</span>, <span class="hljs-string">'HH24'</span>)) <span class="hljs-keyword">BETWEEN</span> <span class="hljs-number">09</span> <span class="hljs-keyword">AND</span> <span class="hljs-number">18</span> <span class="hljs-keyword">THEN</span>
		raise_application_error (- <span class="hljs-number">20202</span>,
			<span class="hljs-string">'cannot perform delete operation b/w 9am to 6pm'</span>);
	<span class="hljs-keyword">END</span> <span class="hljs-keyword">IF</span>;
<span class="hljs-keyword">END</span>;

/
</div></code></pre>

</body>
</html>
